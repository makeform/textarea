div
  .form-group.has-tips.manual(ld="base error-root",plug="widget")
    div(ld="display", data-display="block"): label.d-flex.align-items-end.flex-wrap
      div
        span(ld="label")
        .variant.text-sm.ml-2 (#[span(ld="variant")])
        span.text-danger.ml-2(ld="is-required") *
      .flex-grow-1
      .m-edit: .text-danger.text-sm(ld="limitation")
    .text-sm.text-muted(ld="display", data-display="block"): div(ld="desc", style="margin:-.6em 0 .7em")
    .m-edit.position-relative
      textarea.form-control(ld="input",rows="5")
      .hover-tip.tip-sm: div(ld-each="error")
      .position-absolute.d-none.w-100.h-100.bg-white.border.rounded.p-2(ld="preview",
      style="top:0;left:0;box-shadow:inset 0 2px 4px rgba(0,0,0,.1);overflow:scroll")
      .position-absolute.d-flex.justify-content-end.align-items-center(style="bottom:.7em;right:.7em")
        label.text-sm.mr-2.mb-0.clickable(ld="enable-markdown"): .d-flex.align-items-center
          input.mr-2(type="checkbox",ld="enable-markdown-input")
          div(t) 啟用 Markdown
        .btn-group.bg-white
          .btn.btn-outline-secondary.btn-sm(t,ld="mode",data-name="edit") edit
          .btn.btn-outline-secondary.btn-sm(t,ld="mode",data-name="preview") preview
    .m-edit(ld="display",data-display="block"): .text-danger.text-sm.mt-2.note(ld-each="note")
    .m-view.position-relative
      .border.rounded-sm.p-2(ld="content")
  script(type="@plotdb/block"): :lsc
    module.exports =
      pkg:
        name: "@makeform/textarea", extend: {name: "@makeform/input", dom: "overwrite"}
        i18n:
          en:
            "啟用 Markdown": "Enable Markdown"
            edit: "edit"
            preview: "preview"
          "zh-TW":
            "啟用 Markdown": "啟用 Markdown"
            edit: "編輯"
            preview: "預覽"
